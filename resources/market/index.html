<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="{{pluResPath}}market/index.css" />
    <link rel="shortcut icon" href="#" />
</head>

<body>
    <div class="container" id="container">
        <!-- Header -->
        <div class="market-header">
            <div class="header-left">
                <div class="header-decoration left"></div>
                <span class="header-title">å†œäº§å“äº¤æ˜“æ‰€</span>
                <div class="header-decoration right"></div>
            </div>
            <div class="market-status">
                <span class="status-dot"></span>
                <span class="status-text">å®æ—¶è¡Œæƒ…</span>
            </div>
        </div>

        <!-- Player Info Bar -->
        <div class="info-bar">
            <div class="info-item">
                <span class="info-icon">ğŸ’°</span>
                <span class="info-value">{{playerCoins}}</span>
            </div>
            <div class="info-item">
                <span class="info-icon">ğŸ“Š</span>
                <span class="info-label">åŠ¨æ€å•†å“</span>
                <span class="info-value">{{totalItems}}</span>
            </div>
            <div class="info-item">
                <span class="info-icon">ğŸ•</span>
                <span class="info-label">æ›´æ–°</span>
                <span class="info-value">{{updateTime}}</span>
            </div>
        </div>

        <!-- Section 1: Top 10 Volatile Items with Charts -->
        {{if topVolatileItems.length > 0}}
        <div class="section">
            <div class="section-title">
                <span class="section-icon">ğŸ”¥</span>
                <span>çƒ­é—¨æ³¢åŠ¨ TOP {{topVolatileItems.length}}</span>
            </div>
            <div class="ticker-grid">
                {{each topVolatileItems item}}
                <div class="ticker-card {{item.priceTrend}}">
                    <div class="card-header">
                        <div class="item-info">
                            <span class="item-icon">{{item.icon}}</span>
                            <span class="item-name">{{item.name}}</span>
                        </div>
                        <div class="trend-badge {{item.priceTrend}}">
                            {{if item.priceTrend == 'rising'}}â–²{{else if item.priceTrend == 'falling'}}â–¼{{else}}â”{{/if}}
                            {{if item.sellPriceChange >= 0}}+{{/if}}{{item.sellPriceChange}}%
                        </div>
                    </div>
                    <div class="card-prices">
                        <div class="price-row">
                            <span class="price-label">æ”¶è´­ä»·</span>
                            <span class="price-value sell">{{item.currentSellPrice}}</span>
                        </div>
                    </div>
                    <div class="sparkline-container">
                        <svg class="sparkline" viewBox="0 0 100 30" preserveAspectRatio="none">
                            <path class="sparkline-path {{item.priceTrend}}" d="{{item.sparklinePath}}" fill="none" stroke-width="2" vector-effect="non-scaling-stroke"/>
                        </svg>
                    </div>
                    <div class="card-footer">
                        <span class="supply-info">ä»Šæ—¥ä¾›åº” {{item.supply24h}}</span>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
        {{/if}}

        <!-- Section 2: Other Items Compact List -->
        {{if otherItems.length > 0}}
        <div class="section">
            <div class="section-title">
                <span class="section-icon">ğŸ“‹</span>
                <span>å…¶ä»–å•†å“</span>
            </div>
            <div class="compact-list">
                <div class="list-header">
                    <span class="col col-name">å•†å“</span>
                    <span class="col col-trend">è¶‹åŠ¿</span>
                    <span class="col col-sell">æ”¶è´­ä»·</span>
                    <span class="col col-change">æ¶¨è·Œ</span>
                </div>
                <div class="list-body">
                    {{each otherItems item}}
                    <div class="list-row">
                        <span class="col col-name">
                            <span class="mini-icon">{{item.icon}}</span>
                            {{item.name}}
                        </span>
                        <span class="col col-trend">
                            {{if item.priceTrend == 'rising'}}ğŸ“ˆ{{else if item.priceTrend == 'falling'}}ğŸ“‰{{else}}â–{{/if}}
                        </span>
                        <span class="col col-sell price-sell">{{item.currentSellPrice}}</span>
                        <span class="col col-change {{if item.sellPriceChange > 0}}positive{{else if item.sellPriceChange < 0}}negative{{else}}neutral{{/if}}">
                            {{if item.sellPriceChange > 0}}+{{/if}}{{item.sellPriceChange}}%
                        </span>
                    </div>
                    {{/each}}
                </div>
            </div>
        </div>
        {{/if}}

        <!-- Empty State -->
        {{if topVolatileItems.length == 0 && otherItems.length == 0}}
        <div class="empty-state">
            <span class="empty-icon">ğŸ“­</span>
            <span class="empty-text">æš‚æ— åŠ¨æ€ä»·æ ¼å•†å“</span>
        </div>
        {{/if}}

        <!-- Footer -->
        <div class="market-footer">
            <div class="tip-row">
                <span class="tip-cmd">#ncå‡ºå”® [å•†å“] [æ•°é‡]</span>
                <span class="tip-desc">æŒ‰å¸‚åœºä»·å‡ºå”®</span>
            </div>
        </div>
    </div>
</body>

</html>
