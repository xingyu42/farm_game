
# Miao-Yunzai 农场游戏插件

这是一个为 [Miao-Yunzai](https://github.com/yoimiya-kokomi/miao-yunzai) 设计的高度可定制的农场模拟经营游戏插件。玩家可以在群聊中体验种植、收获、交易、社交等多种玩法，打造属于自己的个性化农场。

## ✨ 功能亮点

- **丰富的游戏系统**: 包含种植、签到、商店、仓库、土地、偷菜、防护等多个核心系统。
- **高度可配置**: 从作物属性到商店物品，几乎所有游戏参数都可通过 `YAML` 文件进行自定义。
- **动态经济模型**: 商店价格会根据市场供需动态调整（未来功能）。
- **模块化服务架构**: 基于服务的架构设计，逻辑清晰，易于扩展和维护。
- **完善的帮助系统**: 提供详细的指令说明和分类帮助，方便玩家快速上手。
- **管理员工具**: 内置强大的管理指令，方便服主进行玩家管理和数据调整。

## 🚀 快速开始

1. **安装插件**

   ```bash
   git clone https://github.com/xingyu42/farm_game.git ./plugins/farm_game
   ```

2. **重启 Miao-Yunzai**
   重启您的 Miao-Yunzai 机器人以加载插件。

3. **开始游戏**
   在任意群聊中发送 `#nc注册` 即可开始您的农场之旅！

## 📖 使用方法

通过发送以 `#nc` 开头的指令与游戏互动。发送 `#nc帮助` 可以获取完整的指令列表。

### 主要指令分类

| 分类 | 指令前缀 | 描述 |
| :--- | :--- | :--- |
| **基础功能** | `#nc帮助 基础功能` | 注册、签到、查看个人信息等。 |
| **农场管理** | `#nc帮助 农场管理` | 种植、浇水、收获、查看农场状态等。 |
| **仓库管理** | `#nc帮助 仓库管理` | 查看仓库、锁定/解锁物品。 |
| **商店交易** | `#nc帮助 商店交易` | 购买种子、出售作物、查看市场价格。 |
| **土地系统** | `#nc帮助 土地系统` | 扩张土地、升级土地品质。 |
| **偷菜防御** | `#nc帮助 偷菜防御` | 偷取他人作物、使用狗粮进行防护。 |
| **管理功能** | `#nc帮助 管理功能` | (仅限管理员) 重置玩家、增减金币/经验等。 |

### 常用指令示例

- `#nc注册` - 创建您的游戏角色。
- `#nc我的农场` - 查看您农场的当前状态。
- `#nc商店` - 浏览可购买的商品。
- `#nc购买 小麦种子 10` - 购买10个小麦种子。
- `#nc种植 1 小麦` - 在1号土地上种植小麦。
- `#nc收获 1` - 收获1号土地上成熟的作物。
- `#nc仓库` - 查看您仓库中的所有物品。
- `#nc出售 小麦 5` - 出售5个小麦。

## 🛠️ 技术栈

- **核心框架**: [Miao-Yunzai](https://github.com/yoimiya-kokomi/miao-yunzai)
- **语言**: JavaScript (ESM)
- **数据存储**: Redis
- **配置文件**: YAML
- **测试框架**: Jest
- **代码规范**: ESLint

## 🏗️ 项目架构

项目采用模块化和面向服务的架构，旨在实现高内聚、低耦合。

- **`index.js`**: 插件主入口，负责加载所有 `apps`。
- **`apps/`**: 功能模块目录，每个文件对应一组用户指令和交互逻辑 (类似 Controller)。
- **`services/`**: 核心业务逻辑层，封装了所有与数据和游戏规则相关的操作。
  - `services/index.js`: 服务容器，采用依赖注入模式管理所有服务的实例化和依赖关系。
  - `services/player/`: 封装与玩家数据管理相关的服务。
  - `services/planting/`: 封装与种植相关的服务。
- **`models/`**: 数据模型层，定义了如玩家、土地、物品等核心数据结构。
- **`utils/`**: 通用工具模块，提供 Redis 客户端、文件存储、计算器等可复用功能。
- **`config/`**: 配置文件目录，分离了默认配置和用户自定义配置。

## 🤝 贡献

欢迎提交 Pull Request 或 Issue 来为本项目做出贡献。

在提交代码前，请确保：

- 代码通过了 ESLint 检查 (`npm run lint`)。

## 📄 License

ISC
